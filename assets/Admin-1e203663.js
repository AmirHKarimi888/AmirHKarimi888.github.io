import{h as F,k as M,A as _,i as v,p as l,r as o,o as i,c as f,a as s,w as e,b as w,l as S,d as r,F as j,e as T,u as Y,f as m,t as g,j as k}from"./index-17af02a4.js";const L={class:"admin"},U=w("h3",{class:"mt-15"},"Add Posts",-1),q={class:"posts mt-12 mx-auto"},H={__name:"Admin",setup(z){const d=F("");M(()=>{_.get(v+"/posts",t=>l.value=t.data)});const h=()=>{const t={id:parseInt(l.value.length+1),title:d.value,date:`${new Date().getMonth()+1}/${new Date().getDate()}/${new Date().getFullYear()}`,updated:"",views:0,content:[],editCon:!1};l.value=[...l.value,t],_.post(v+"/posts",t),d.value=""},C=(t,a)=>{d.value=a,l.value=l.value.map(c=>parseInt(c.id)===t?{...c,editCon:!0}:c)},x=t=>{_.delete(v+"/posts/"+t),l.value=l.value.map(a=>parseInt(a.id)===t?{...a,title:d.value,editCon:!1,updated:`${new Date().getDay()}/${new Date().getMonth()}/${new Date().getFullYear()}`}:a),d.value=""},b=t=>{_.delete(v+"/posts/"+t),l.value=l.value.filter(a=>{if(parseInt(a.id)!==t)return a})};return(t,a)=>{const c=o("v-text-field"),u=o("v-btn"),D=o("v-form"),I=o("v-sheet"),P=o("v-card-title"),$=o("router-link"),V=o("v-img"),y=o("v-card-subtitle"),A=o("v-card-actions"),N=o("v-card"),B=o("v-col"),E=o("v-row");return i(),f("div",L,[U,s(I,{width:"300",class:"mx-auto mt-12"},{default:e(()=>[s(D,{"fast-fail":"",onSubmit:a[1]||(a[1]=S(()=>{},["prevent"]))},{default:e(()=>[s(c,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=n=>d.value=n),label:"Title"},null,8,["modelValue"]),s(u,{color:"success",onClick:h,type:"submit",block:"",class:"mt-2"},{default:e(()=>[r("Add Post")]),_:1})]),_:1})]),_:1}),w("div",q,[s(E,null,{default:e(()=>[(i(!0),f(j,null,T(Y(l),n=>(i(),m(B,{key:n},{default:e(()=>[s(N,{"min-width":"220","max-width":"300",class:"mx-auto",elevation:"6"},{default:e(()=>[s(V,{class:"align-end text-white",height:"200",src:"/images/"+parseInt(n.id)+".jpg",cover:""},{default:e(()=>[s($,{to:{name:"pageAdmin",params:{id:parseInt(n.id)}}},{default:e(()=>[s(P,null,{default:e(()=>[r(g(n.title),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1032,["src"]),s(y,{class:"pt-4"},{default:e(()=>[r(" Number "+g(parseInt(n.id)),1)]),_:2},1024),s(A,null,{default:e(()=>[s(u,{color:"red",onClick:p=>b(parseInt(n.id))},{default:e(()=>[r(" Delete Post ")]),_:2},1032,["onClick"]),n.editCon?k("",!0):(i(),m(u,{key:0,color:"orange",onClick:p=>(C(parseInt(n.id)),n.title)},{default:e(()=>[r(" Start Editing Post ")]),_:2},1032,["onClick"])),n.editCon?(i(),m(u,{key:1,color:"success",onClick:p=>x(parseInt(n.id))},{default:e(()=>[r(" Edit Post ")]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])}}};export{H as default};
